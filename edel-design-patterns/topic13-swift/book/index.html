 <!DOCTYPE html>
 <html>
   <head>

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/solarized-light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.4/semantic.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

      <style>
        

body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}



    </style>

  </head>

  <body>
    

<style>
  

code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom: thin solid black;
}
h2
{
  font-size:110%;
  border-bottom: thin solid black;
}
h3
{
  font-size:100%;
  border-bottom: thin solid black;
}



</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <i id="toc" class="sitemap icon"></i>
    <a href="../index.html">
      Perspectives on Swift
    </a>
  </header>
  <div class="right tab-menu menu">
    
    <a class="item" data-tab="SwiftToDoLab">
      SwiftToDoLab
    </a>
    
    <a class="item" data-tab="01">
      01
    </a>
    
    <a class="item" data-tab="02">
      02
    </a>
    
    <a class="item" data-tab="03">
      03
    </a>
    
    <a class="item" data-tab="04">
      04
    </a>
    
    <a class="item" data-tab="05">
      05
    </a>
    
    <a class="item" data-tab="06">
      06
    </a>
    
    <a class="item" data-tab="07">
      07
    </a>
    
    <a class="item" data-tab="08">
      08
    </a>
    
    <a class="item" data-tab="09">
      09
    </a>
    
    <a class="item" href="../../index.html">
      <i class="home icon"></i>
    </a>
  </div>
</div>

<div class="ui segment pushable">
  <div class="ui inverted labeled icon left inline vertical sidebar menu">
    
      
        <a class="item" href="../../topic01-context/book/index.html">
          Lab-01
        </a>
      
    
      
        <a class="item" href="../../topic02-template-method-strategy/book-template-method-strategy/index.html">
          Lab-02
        </a>
      
    
      
        <a class="item" href="../../topic03-command/book-a-command/index.html">
          Lab-03
        </a>
      
    
      
        <a class="item" href="../../topic04-prototype/book-a-prototype/index.html">
          lab-04
        </a>
      
    
      
        <a class="item" href="../../topic05-gof-patterns/book/index.html">
          Lab-05
        </a>
      
    
      
        <a class="item" href="../../topic06-adapter-singleton-memento/book/index.html">
          Lab-06
        </a>
      
    
      
        <a class="item" href="../../topic07-enterprise-patterns-1/book/index.html">
          Lab-07
        </a>
      
    
      
        <a class="item" href="../../topic08-architecture/book/index.html">
          Lab-08
        </a>
      
    
      
        <a class="item" href="../../topic09-enterprise-patterns-2/book/index.html">
          Lab-09
        </a>
      
    
      
        <a class="item" href="../../topic10-half-sync/book/index.html">
          Lab-10
        </a>
      
    
      
        <a class="item" href="../../topic11-microservices/book-a/index.html">
          Lab-11-A
        </a>
      
    
      
        <a class="item" href="../../topic11-microservices/book-b/index.html">
          Lab-11-B
        </a>
      
    
      
        <a class="item" href="../../topic12-xtend/book-a/index.html">
          Lab-12-A
        </a>
      
    
      
        <a class="item" href="../../topic12-xtend/book-b/index.html">
          Lab-12-B
        </a>
      
    
      
        <a class="item" href="../../topic12-xtend/book-c/index.html">
          Lab-12-C
        </a>
      
    
      
        <a class="active item" href="../../topic13-swift/book/index.html">
          SwiftToDoLab
        </a>
      
    
  </div>
  <div class="pusher">
    <div class="ui basic segment">
      <br>
      
      <div  class="ui tab segment lab" data-tab="SwiftToDoLab">
        <h1>Objectives</h1>
<p>Rebuild the ToDo application from the apple developer documentation in Swift</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="01">
        <h1>Setup</h1>
<p>In XCode, create a new IOS &#39;Single View&#39; Swift application:</p>
<p><img src="img/01.png" alt=""></p>
<p>Make sure the app is a Swift application:</p>
<p><img src="img/02.png" alt=""></p>
<p>Use this .gitignore file:</p>
<pre><code># Xcode
#
build/
*.pbxuser
!default.pbxuser
*.mode1v3
!default.mode1v3
*.mode2v3
!default.mode2v3
*.perspectivev3
!default.perspectivev3
xcuserdata
*.xccheckout
*.moved-aside
DerivedData
*.hmap
*.ipa
*.xcuserstate</code></pre>
<p>(just copy/paste this into .gitignore in your projects folder)</p>
<p>Commit this to git using your preferred method.</p>
<p>Run the app now using the simulator:</p>
<p><img src="img/02.png" alt=""></p>
<p>You should have these sources:</p>
<h2>AppDelegate</h2>
<pre><code>import UIKit

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate
{
  var window: UIWindow?

  func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: NSDictionary?) -&gt; Bool
  {
    return true
  }

  func applicationWillResignActive(application: UIApplication)
  {
  }

  func applicationDidEnterBackground(application: UIApplication)
  {
  }

  func applicationWillEnterForeground(application: UIApplication)
  {
  }

  func applicationDidBecomeActive(application: UIApplication)
  {
  }

  func applicationWillTerminate(application: UIApplication)
  {
  }
}</code></pre>
<h2>ViewController:</h2>
<pre><code>import UIKit

class ViewController: UIViewController
{
  override func viewDidLoad()
  {
    super.viewDidLoad()
  }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }
}</code></pre>
<p>Select the View Controller in the File Inspector:</p>
<p><img src="img/03.png" alt=""></p>
<p>and disable the use of Auto Layout and size classes. The storyboard scene will be reconfigured to look like this:</p>
<p><img src="img/04.png" alt=""></p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="02">
        <h1>Outlets &amp; Delegates</h1>
<p>Drag a TextField onto the ViewController scene:</p>
<p><img src="img/06.png" alt=""></p>
<p>Positioning it as shown.</p>
<p>You should now be be able to run the app and enter text:</p>
<p><img src="img/07.png" alt=""></p>
<p>In the storyboard view, select the View and then View Controller and then select &quot;View-&gt;Editors-&gt;Show Assistant Editor&quot; from the main menu. This will show the visual and textual representations side-by-side:</p>
<p><img src="img/08.png" alt=""></p>
<p>Select the EditText control in the view and Ctrl-Drag it to the class. A line appears and try to drop it just inside the opening brace of the class:</p>
<p><img src="img/09.png" alt=""></p>
<p>In the pop up dialog, enter the name &#39;toDoItem&#39; as shown and press connect. T The class will look like this:</p>
<pre><code>import UIKit

class ViewController: UIViewController
{
  @IBOutlet var toDoItem: UITextField

  override func viewDidLoad()
  {
    super.viewDidLoad()
  }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }
}</code></pre>
<p>A new attribute has been inserted. See if you can locate a reference to this outlet in the &#39;Connections Inspector&#39;</p>
<p><img src="img/10.png" alt=""></p>
<p>We would like to know when the user presses return while entering text. One way of doing this is to implement the this protocol:</p>
<ul>
<li><a href="https://developer.apple.com/library/prerelease/iOS/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/index.html#//apple_ref/occ/intf/UITextFieldDelegate">UITextFieldDelegate</a> </li>
</ul>
<p>Implementing a protocol involves appending the protocol name to the class:</p>
<pre><code>class ViewController: UIViewController, UITextFieldDelegate</code></pre>
<p>.. and then setting the delegate as soon as the object loads:</p>
<pre><code>  override func viewDidLoad()
  {
    super.viewDidLoad()
    toDoItem.delegate = self
  }</code></pre>
<p>Finally, we need to implement a handler for the event we are interested in:</p>
<pre><code>  func textFieldShouldReturn(textField: UITextField!) -&gt; Bool
  {
    println(toDoItem.text)
    return true
  }</code></pre>
<p>We should be able to run the app now and the text we have typed should appear on the xcode output window:</p>
<p><img src="img/11.png" alt=""></p>
<p>This is the complete class:</p>
<pre><code>import UIKit

class ViewController: UIViewController, UITextFieldDelegate
{
  @IBOutlet var toDoItem: UITextField

  override func viewDidLoad()
  {
    super.viewDidLoad()
    toDoItem.delegate = self
  }

  func textFieldShouldReturn(textField: UITextField!) -&gt; Bool
  {
    println(toDoItem.text)
    return true
  }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }
}</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="03">
        <h1>TableView</h1>
<p>In the storyboard, introduce a TableViewController, and position it alongside the existing view in the scene as shown:</p>
<p><img src="img/12.png" alt=""></p>
<p>Drag and drop the &#39;initial scene&#39; arrow from the existing controller to the front of the new controller:</p>
<p><img src="img/13.png" alt=""></p>
<p>(Note the &#39;This is the View Controller&#39; will be automatically ticked in the Attributes Inspector on the right)</p>
<p>Run the app again - a different (table) view appears instead.</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="04">
        <h1>Connecting Views</h1>
<p>Select the Table View Controller in the storyboard editor, and select &#39;Editor-&gt;Embed in-&gt;Navigation Controller. This will reconfigure the layout as follows:</p>
<p><img src="img/14.png" alt=""></p>
<p>It has created space at the top of the TableView, into which we can now drag and drop a button:</p>
<p><img src="img/23.png" alt=""></p>
<p>Into the navigation area:</p>
<p><img src="img/24.png" alt=""></p>
<p>When this is placed, select the &#39;Bar Button&#39; as it is called in the outline view:</p>
<p><img src="img/15.png" alt=""></p>
<p>Change its identifier to &#39;Add&#39; in the attributes inspector:</p>
<p><img src="img/16.png" alt=""></p>
<p>Now Control-Drag the new button to the ViewControler - establishing a new &#39;segue&#39; in the scene:</p>
<p><img src="img/18.png" alt=""></p>
<p>When connecting the controller, select &#39;Push&#39; as the transition type.</p>
<p>You should now be able to run the app and move from the initial table view to the second view using the &#39;+&#39; button. You should also be able to return to this opening view via an automatically generated &#39;Back&#39; button</p>
<p>In the storyboard outline view, select &#39;Navigation Item&#39;: </p>
<p><img src="img/19.png" alt=""></p>
<p>.. and in the Attributes Inspector, enter a title for the Table Controller:</p>
<p><img src="img/20.png" alt=""></p>
<p>Now try running the app again. Note the changed title in the Item view - from &#39;Back&quot; to &#39;To Do List&#39;</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="05">
        <h1>Custom Classes</h1>
<p>The TableViewController we introduced in the storyboard is currently entirely visual, and without any Swift class associated with it. We can create a class now and establish the connection with the visual representation.</p>
<p>Select the folder containing our classes in the project view, right click and select &#39;New File&#39; then select &#39;Cocoa Touch&#39; class:</p>
<p><img src="img/25.png" alt=""></p>
<p>Make sure the class is derived from &#39;UITableViewController&#39;, and call it ToDoListController:</p>
<p><img src="img/26.png" alt=""></p>
<p>This will generate the following class:</p>
<pre><code>import UIKit

class ToDoListController: UITableViewController
{
  init(style: UITableViewStyle)
  {
    super.init(style: style)
  }

  override func viewDidLoad()
  {
    super.viewDidLoad()
   }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }

  // #pragma mark - Table view data source

  override func numberOfSectionsInTableView(tableView: UITableView?) -&gt; Int
  {
    return 0
  }

  override func tableView(tableView: UITableView?, numberOfRowsInSection section: Int) -&gt; Int
  {
    return 0
  }
}</code></pre>
<p>(Comments removed)</p>
<p>We now need to connect this class with the visual version as designed in the storyboard.</p>
<p>Select the TableView controller in the outline view:</p>
<p><img src="img/27.png" alt=""></p>
<p>In the Identity Inspector, select the ToDoListContorller class form the &#39;Class&#39; drop down:</p>
<p><img src="img/28.png" alt=""></p>
<p>The class is now bound. To verify this, we can place a simple print statement:</p>
<pre><code>  override func viewDidLoad()
  {
    super.viewDidLoad()
    println (&quot;Tableview Loaded&quot;)
   }</code></pre>
<p>Run the app now, we get an error message as it is launched:</p>
<pre><code>/Users/edeleastar/repos/projects/ios/ToDoListSwift/ToDoListSwift/ToDoListController.swift: 3: 3: fatal error: use of unimplemented initializer &#39;init(coder:)&#39; for class &#39;ToDoListSwift.ToDoListController&#39;
(lldb)</code></pre>
<p>This may be a bug in the xcode beta - include this method in the ToDoListController:</p>
<pre><code> init(coder aDecoder: NSCoder!)
  {
    super.init(coder: aDecoder)
  }</code></pre>
<p>Finally, run it again and look to the the message appearing in xcode:</p>
<p><img src="img/29.png" alt=""></p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="06">
        <h1>Done / Cancel Buttons</h1>
<p>Just as we encapsulated the TableView controller in a Navigation Controller earlier - we will now also embed the View controller.</p>
<p>First select the View Controller:</p>
<p><img src="img/30.png" alt=""></p>
<p>.. and then select &quot;Editor-&gt;Embed in-&gt;Navigation Controller&quot;. This will reconfigure the scenes:</p>
<p><img src="img/31.png" alt=""></p>
<p>Run the app now - and you will see this error in the console:</p>
<pre><code>2014-06-22 06:25:24.663 ToDoListSwift[33780:955905] *** Terminating app due to uncaught exception &#39;NSInvalidArgumentException&#39;,
reason: &#39;Pushing a navigation controller is not supported&#39;</code></pre>
<p>This is because of an incorrect &#39;seague&#39; form the table to the item controller. Select this segue:</p>
<p><img src="img/32.png" alt=""></p>
<p>and reset its Segue type to &#39;modal&#39;:</p>
<p><img src="img/33.png" alt=""></p>
<p>Run the application again. This time it operates correctly, however when we navigate to the item view, we can no longer return to the table view. We will customise this now.</p>
<p>First, drag drop two buttons to the navigation bar of the item view:</p>
<p><img src="img/34.png" alt=""></p>
<p>We need to connect these buttons somehow to the TableViewController, so that when they are pressed, we can recover the todo text (or otherwise if Cancel is pressed).</p>
<p>Try to Control-Drag the Cancel button to the &quot;Exit&quot; </p>
<p><img src="img/35.png" alt=""></p>
<p>This will not work, as the &quot;Exit&quot; responder fails to propose any outlets/endpoints. To fix this, introduce the following function into ToDoListController:</p>
<pre><code>  @IBAction func unwindToList (segue: UIStoryboardSegue?)
  {
    println (&quot;seague unwound&quot;)
  }</code></pre>
<p>Try the Control-Drag of one of the buttons again - it still will not engage. One last change should fix this. Introduce the following header into the project:</p>
<h2>ToDoListController.h</h2>
<pre><code>#import &lt;Foundation/Foundation.h&gt;

#import &lt;UIKit/UIKit.h&gt;

class ToDoListController
@interface ToDoListController

- (IBAction)unwindToList: (UIStoryboardSegue *)segue;

@end</code></pre>
<p>This is an Objective-C bridging header for the class ToDoListController. We need to complete the bridge in the ToDoListController swift class:</p>
<pre><code>@objc(ToDoListController)
class ToDoListController: UITableViewController
{
  ...</code></pre>
<p>Make sure you rebuild the app now. The, Control-Drag the buttons to the Exit - and the seague method defined above should appear. Select it for both buttons in turn.</p>
<p>Run the app again. Does it item view return this time? Perhaps not. If the return fails, try the following workaround:</p>
<pre><code>//@objc(ToDoListController)
class ToDoListController: UITableViewController
{
  ...</code></pre>
<p>(Comment out the objc attribute above).</p>
<p>It should work now (hopefully). I.e. &#39;Done&#39; and &#39;Cancel&#39; should return to the list view, and the log message should appear in the console.</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="07">
        <h1>ToDoItem Class</h1>
<p>Introduce the following class:</p>
<h2>ToDoItem</h2>
<pre><code>class ToDoItem
{
  var completed = false
  var itemName  = &quot;&quot;

  init(completed: Bool = false, itemName:String = &quot;empty&quot;)
  {
    self.completed = completed
    self.itemName  = itemName
  }
}</code></pre>
<p>Open the View Controller again on storyboard, and using &#39;View-&gt;Show Assistant Editor&#39;, open the source alongside it:</p>
<p><img src="img/36.png" alt=""></p>
<p>Control Drag each of the buttons into the class, giving the outlet the names &#39;cancel&#39; and &#39;done&#39;. We should get the following generated in the ViewController:</p>
<pre><code>  @IBOutlet var cancel   : UIButton
  @IBOutlet var done     : UIButton</code></pre>
<p>(Make sure the type is UIButton, not UIBarButton in the generated code). We can now introduce a property to hold the todo text:</p>
<pre><code>  var todo               : ToDoItem?</code></pre>
<p>And we can intercept the return from the view in the &#39;prepareForSeague&#39; override to initialise (and print) this text item</p>
<pre><code>  override func prepareForSegue(segue: UIStoryboardSegue!, sender: AnyObject!)
  {
    if let button = sender as? NSObject
    {
      todo = button == done ? ToDoItem(itemName:toDoItem.text): nil
      println(todo?.itemName)
    }
  }</code></pre>
<p>Look carefully at what we are doing here: determining which button has been pressed, and if it is done, we recover the text from the control.</p>
<p>Run the app now. You should see the todo item printed when &#39;done&#39; is pressed.</p>
<p>This is the final version of the ViewController class (we have removed one of the method we had earlier):</p>
<pre><code>import UIKit

class ViewController: UIViewController, UITextFieldDelegate
{
  @IBOutlet var toDoItem : UITextField
  @IBOutlet var cancel   : UIButton
  @IBOutlet var done     : UIButton
  var todo               : ToDoItem?

  override func viewDidLoad()
  {
    super.viewDidLoad()
  }

  override func prepareForSegue(segue: UIStoryboardSegue!, sender: AnyObject!)
  {
    if let button = sender as? NSObject
    {
      todo = button == done ? ToDoItem(itemName:toDoItem.text): nil
      println(todo?.itemName)
    }
  }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }
}</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="08">
        <h1>ToDoListTableView Class</h1>
<p>Our final step is to display the item in the TableView. </p>
<p>First introduce an array of ToDoItems in the tableview controller:</p>
<pre><code>  var todoItems = ToDoItem[]()</code></pre>
<p>We can refactor the unwind method to retrieve the text:</p>
<pre><code>  @IBAction func unwindToList (segue: UIStoryboardSegue?)
  {
    var controller = segue?.sourceViewController as ViewController
    if controller.todo != nil
    {
      todoItems.append(controller.todo!)
      var str = controller.todo?.itemName
      println (&quot;adding&quot; + str! + &quot; to list&quot;)
    }
  }</code></pre>
<p>Run the app now and you should see an appropriate message in the debug console.</p>
<p>This method can be more elegantly written using <a href="https://developer.apple.com/library/prerelease/mac/documentation/Swift/Conceptual/Swift_Programming_Language/OptionalChaining.html">Optional Chaining</a> as follows:</p>
<pre><code>  @IBAction func unwindToList (segue: UIStoryboardSegue?)
  {
    if let controller = segue?.sourceViewController as? ViewController
    {
      if let toDo = controller.todo
      {
        println (&quot;adding&quot; + toDo.itemName + &quot; to list&quot;)
        todoItems.append(toDo)
      }
    }
  }</code></pre>
<p>Our next step is to display this list in the table. First change this method from retuning zero to returning the number of elements in the list:</p>
<pre><code>  override func tableView(tableView: UITableView?, numberOfRowsInSection section: Int) -&gt; Int
  {
    return todoItems.count
  }</code></pre>
<p>Also, change the numberOfSections override to return 1:</p>
<pre><code>  override func numberOfSectionsInTableView(tableView: UITableView?) -&gt; Int
  {
    return 1
  }</code></pre>
<p>In order to display the todo items, we need one further change to the storyboard. Select the &quot;TableViewCell&quot; in the outline view, and locate the &#39;ReuseIdentifier&#39; in the Attributes Inspector:</p>
<p><img src="img/37.png" alt=""></p>
<p>Change this to &#39;ToDoCell&#39;</p>
<p><img src="img/38.png" alt=""></p>
<p>We can now proceed to implement the override to display the entry for each cell:</p>
<pre><code>  override func tableView(tableView: UITableView?, cellForRowAtIndexPath : NSIndexPath!) -&gt; UITableViewCell?
  {
    let cell           = UITableViewCell(style: UITableViewCellStyle.Default, reuseIdentifier: &quot;ToDoCell&quot;)
    var task           = todoItems[cellForRowAtIndexPath.row]

    cell.text          = task.itemName
    cell.accessoryType = task.completed ? UITableViewCellAccessoryType.Checkmark : UITableViewCellAccessoryType.None

    return cell
  }</code></pre>
<p>Finally, the todoitem will not appear until we reload the data in the unwind:</p>
<pre><code>  @IBAction func unwindToList (segue: UIStoryboardSegue?)
  {
    if let controller = segue?.sourceViewController as? ViewController
    {
      if let toDo = controller.todo
      {
        println (&quot;adding&quot; + toDo.itemName + &quot; to list&quot;)
        todoItems.append(toDo)
        self.tableView.reloadData()
      }
    }
  }</code></pre>
<p>(just one extra line here).</p>
<p>The app should now launch and run as expected.</p>
<p>This is the current version of the TableView controller:</p>
<pre><code>import UIKit

//@objc(ToDoListController)
class ToDoListController: UITableViewController
{
  var todoItems = ToDoItem[]()

  init(style: UITableViewStyle)
  {
    super.init(style: style)
  }

  init(coder aDecoder: NSCoder!)
  {
    super.init(coder: aDecoder)
  }

  override func viewDidLoad()
  {
    super.viewDidLoad()
    println (&quot;Tableview Loaded&quot;)
   }

  @IBAction func unwindToList (segue: UIStoryboardSegue?)
  {
    if let controller = segue?.sourceViewController as? ViewController
    {
      if let toDo = controller.todo
      {
        println (&quot;adding&quot; + toDo.itemName + &quot; to list&quot;)
        todoItems.append(toDo)
        self.tableView.reloadData()
      }
    }
  }

  override func didReceiveMemoryWarning()
  {
    super.didReceiveMemoryWarning()
  }

  // #pragma mark - Table view data source

  override func numberOfSectionsInTableView(tableView: UITableView?) -&gt; Int
  {
    return 1
  }

  override func tableView(tableView: UITableView?, numberOfRowsInSection section: Int) -&gt; Int
  {
    return todoItems.count
  }

  override func tableView(tableView: UITableView?, cellForRowAtIndexPath : NSIndexPath!) -&gt; UITableViewCell?
  {
    let cell  = UITableViewCell(style: UITableViewCellStyle.Default, reuseIdentifier: &quot;ToDoCell&quot;)
    var task           = todoItems[cellForRowAtIndexPath.row]

    cell.text          = task.itemName
    cell.accessoryType = task.completed ? UITableViewCellAccessoryType.Checkmark : UITableViewCellAccessoryType.None

    return cell
  }
}</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="09">
        <h2>Edit Cells</h2>
<p>Finally, we would like the enable checking / unchecking + redordring and deleting of the todo items in the list.</p>
<p>First to support tick/tick items, introduce this override:</p>
<pre><code>  override func tableView(tableView: UITableView!, didSelectRowAtIndexPath : NSIndexPath!)
  {
    tableView.deselectRowAtIndexPath(didSelectRowAtIndexPath, animated: false)
    var task = self.todoItems[didSelectRowAtIndexPath.row] as ToDoItem
    task.completed = !task.completed
    tableView.reloadRowsAtIndexPaths([didSelectRowAtIndexPath], withRowAnimation: UITableViewRowAnimation.None)
  }</code></pre>
<p>Run the app and when you tap on a todo item, at check mark toggles on / off.</p>
<p>To support Edit/Rearrage/Delete, we need a few changes. First, in the viewDidLoad method we enable the &#39;Edit&#39; button:</p>
<pre><code>  override func viewDidLoad()
  {
    super.viewDidLoad()
    navigationItem.leftBarButtonItem = self.editButtonItem()
    println (&quot;Tableview Loaded&quot;)
  }</code></pre>
<p>If you run the app now, the button appears and will seem to have some effect. However to perform the delete we need this override:</p>
<pre><code>  override func tableView(tableView: UITableView?, commitEditingStyle: UITableViewCellEditingStyle, forRowAtIndexPath: NSIndexPath?)
  {
    if commitEditingStyle == .Delete
    {
      if let index = forRowAtIndexPath?.row
      {
        todoItems.removeAtIndex(index)
        tableView?.deleteRowsAtIndexPaths([forRowAtIndexPath!], withRowAnimation: .Fade)
      }
    }
    else if commitEditingStyle == .Insert
    {
    }
  }</code></pre>
<p>This should work now.</p>
<p>In order to enable re-ordering, we need these overrides:</p>
<pre><code>  override func tableView(tableView: UITableView?, moveRowAtIndexPath : NSIndexPath?, toIndexPath: NSIndexPath?)
  {
  }

  override func tableView(tableView: UITableView?, canMoveRowAtIndexPath : NSIndexPath?) -&gt; Bool
  {
    return true
  }</code></pre>
<p>If you run it now, and add more than one item, you will be able to reorder them when editing is enabled.</p>
<p>Finally, you might like to load some data for test purposes on launch:</p>
<pre><code>  override func viewDidLoad()
  {
    super.viewDidLoad()
    navigationItem.leftBarButtonItem = self.editButtonItem()
    todoItems.append(ToDoItem(itemName:&quot;Buy Milk&quot;,    completed:false))
    todoItems.append(ToDoItem(itemName:&quot;Buy eggs&quot;,    completed:true))
    todoItems.append(ToDoItem(itemName:&quot;Read a book&quot;, completed:false))
    println (&quot;Tableview Loaded&quot;)
  }</code></pre>

      </div>
     
    </div>
  </div>
</div>
  <div class="ui bottom fixed borderless right menu">
    <div class="ui right tiny menu">
      <div class="ui mini message segment">
        Eamonn de Leastar.
        <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
            target="_blank">Creative Commons License
        </a>
      </div>
    </div>
  </div>

    <footer>

    </footer>
    <script>
      
$(document).ready(function()
{
  $("img").addClass ("ui image");
  $('.ui.embed').embed();

  var images = $(".lab img");
  jQuery.each(images, function(i)  {
    if((images[i].alt).length > 0)
    {
      var div_img = $(document.createElement("div")).addClass("ui segment");
      $(images[i]).wrap(div_img);
      var div_label = $(document.createElement("div")).addClass("ui ribbon teal top attached label");
      div_label.append(images[i].alt);
      $(div_label).insertBefore(images[i]);
    }
  });


  $('.ui.menu .item')
      .tab({
        history: true,
        historyType: 'hash',
      });

  $('.popup').popup();

  $('.ui.sidebar')
      .sidebar({ context: $('.pushable') })
      .sidebar('setting', 'transition', 'slide out')
      .sidebar('attach events', '#toc');
});

    </script>
  </body>

 </html>