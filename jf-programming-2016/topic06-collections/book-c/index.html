 <!DOCTYPE html>
 <html>
   <head>

     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">

     

     <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.4/semantic.min.css" type="text/css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/solarized-light.min.css" rel="stylesheet" />

     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.4/semantic.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
     <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/languages/java.min.js"></script>
     <script>hljs.initHighlightingOnLoad();</script>

     

     <style>
       

body 
{
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
}

figcaption
{
  margin-bottom: 20px;
}

.vertical-align
{
  display: flex;
  align-items: center;
}



     </style>

   </head>

  <body>
    

<style>
  

code
{
  font-family: "Monaco";
  font-size: 110%;
}

img
{
  padding:1px;
  border:1px solid black;
}

h1
{
  font-style:italic;
  font-size:130%;
  border-bottom:thin solid black;
}

h2
{
  font-size:110%;
  border-bottom: thin solid black;
}

h3
{
  font-size:100%;
  border-bottom: thin solid black;
}

body
{
  overflow-y: scroll;
}

.pushable > .pusher
{
  padding-bottom: 1.5rem;
}

.ui.segment.pushable
{
  margin: 0;
  padding: 1rem 0;
  overflow: visible;
}



</style>

<div class="ui fixed top pointing inverted menu labmenu">
  <header class="header item">
    <i id="toc" class="sitemap icon"></i>
    <a href="../index.html">
      5: More sophisticated behaviour
    </a>
  </header>
  <div class="right tab-menu menu">
    
    <a class="item" data-tab="Caesar Cipher">
      Caesar Cipher
    </a>
    
    <a class="item" data-tab="01">
      01
    </a>
    
    <a class="item" data-tab="02">
      02
    </a>
    
    <a class="item" data-tab="03">
      03
    </a>
    
    <a class="item" data-tab="Exercises">
      Exercises
    </a>
    
    <a class="item" href="../../index.html">
      <i class="home icon"></i>
    </a>
  </div>
</div>

<div class="ui segment pushable">
  <div class="ui inverted labeled icon left inline vertical sidebar menu">
    
      
        <a class="item" href="../../topic01-classes-objects/book-a/index.html">
          Classes-objects
        </a>
      
    
      
        <a class="item" href="../../topic01-classes-objects/book-b/index.html">
          Class-components
        </a>
      
    
      
        <a class="item" href="../../topic01-classes-objects(solns)/book-solutions/index.html">
          Class-components-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic02-ticket-machine/book/index.html">
          Ticket-Machine
        </a>
      
    
      
        <a class="item" href="../../topic02-ticket-machine(solns)/book-a/index.html">
          Ticket-Machine-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic03-abstraction-modularization/book-a/index.html">
          Abstraction-modularization[1]
        </a>
      
    
      
        <a class="item" href="../../topic03-abstraction-modularization/book-b/index.html">
          Abstraction-modularization[2]
        </a>
      
    
      
        <a class="item" href="../../topic03-abstraction-modularization/book-c/index.html">
          Abstraction-modularization[3]
        </a>
      
    
      
        <a class="item" href="../../topic03-abstraction-modularization(solns)/book-solutions-ab/index.html">
          Abstraction-modularization-Solutions-[1-2]
        </a>
      
    
      
        <a class="item" href="../../topic03-abstraction-modularization(solns)/book-solutions-c/index.html">
          Abstraction-modularization-Solutions-[3]
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow/book-a/index.html">
          Generics-Control-flow
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow/book-b/index.html">
          Control-flow
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow(solns)/book-solutions-a/index.html">
          Notebook_solutions-[1-3]
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow(solns)/book-solutions-b1/index.html">
          Grouping-objects-solutions-[1-7]
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow(solns)/book-solutions-b2/index.html">
          Grouping-objects-solutions-[8-13].md
        </a>
      
    
      
        <a class="item" href="../../topic04-generics-control-flow(solns)/book-solutions-b3/index.html">
          Encoding-solutions-[14-18].md
        </a>
      
    
      
        <a class="item" href="../../topic05(assignment-1)/book-assignment-1/index.html">
          Assignment-1
        </a>
      
    
      
        <a class="item" href="../../topic05(assignment-solns-1)/book-assignment-1-solns/index.html">
          Assignment-1
        </a>
      
    
      
        <a class="item" href="../../topic06-collections/book-a/index.html">
          Collections
        </a>
      
    
      
        <a class="item" href="../../topic06-collections/book-b/index.html">
          Class-members
        </a>
      
    
      
        <a class="active item" href="../../topic06-collections/book-c/index.html">
          Caesar Cipher
        </a>
      
    
      
        <a class="item" href="../../topic06-collections(solns)/book-solutions-a/index.html">
          Collections-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic06-collections(solns)/book-solutions-b/index.html">
          Class-members-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic06-collections(solns)/book-solutions-c/index.html">
          Caesar-Cipher-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic07-test-debug-sort/book-a/index.html">
          Testing-&-Debugging
        </a>
      
    
      
        <a class="item" href="../../topic07-test-debug-sort/book-b/index.html">
          Testing-&-Debugging-(contd.)
        </a>
      
    
      
        <a class="item" href="../../topic07-test-debug-sort/book-c/index.html">
          Sorting-searching
        </a>
      
    
      
        <a class="item" href="../../topic07-test-debug-sort(solns)/book-a-b-solutions/index.html">
          Testing-&-Debugging-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic07-test-debug-sort(solns)/book-c-solutions/index.html">
          Sorting-&-Searching-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic08-spacebook/book-a/index.html">
          Spacebook-(Part-1)
        </a>
      
    
      
        <a class="item" href="../../topic08-spacebook/book-b/index.html">
          Spacebook-(Part-2)
        </a>
      
    
      
        <a class="item" href="../../topic08-spacebook(solns)/book-solutions/index.html">
          Spacebook-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic09(assignment-2)/book-assignment-2/index.html">
          Assignment-2
        </a>
      
    
      
        <a class="item" href="../../topic09(assignment-solns-2)/book-assignment-2-Q1-solns/index.html">
          Assignment-2-Solutions-Q1
        </a>
      
    
      
        <a class="item" href="../../topic09(assignment-solns-2)/book-assignment-2-Q2-solns/index.html">
          Assignment-2-Solutions-Q2
        </a>
      
    
      
        <a class="item" href="../../topic09(assignment-solns-2)/book-assignment-2-Q3-solns/index.html">
          Assignment-2-Solutions-Q3
        </a>
      
    
      
        <a class="item" href="../../topic09(assignment-solns-2)/book-assignment-2-feedback/index.html">
          Assignment-2-Feedback
        </a>
      
    
      
        <a class="item" href="../../topic10-interfaces/book/index.html">
          Using_Interfaces
        </a>
      
    
      
        <a class="item" href="../../topic10-interfaces(solns)/book-solutions/index.html">
          Interfaces-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic11-inheritance/book-a/index.html">
          Polymorphism
        </a>
      
    
      
        <a class="item" href="../../topic11-inheritance/book-b/index.html">
          Eclipse_Exceptions
        </a>
      
    
      
        <a class="item" href="../../topic11-inheritance(solns)/book-a-solutions/index.html">
          Polymorphism-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic11-inheritance(solns)/book-b-solutions/index.html">
          Exceptions-Solutions
        </a>
      
    
      
        <a class="item" href="../../topic12(assignment-3)/book-assignment-3/index.html">
          Assignment-3
        </a>
      
    
      
        <a class="item" href="../../topic12(assignment-solutions-3)/book/index.html">
          Assignment-3-Solutions
        </a>
      
    
  </div>
  <div class="pusher" tabindex="-1">
    <div class="ui basic segment">
      <br>
      
      <div  class="ui tab segment lab" data-tab="Caesar Cipher">
        <h1>Objectives</h1>
<p>We gain further experience in working with the char and Character types by exploring the simple Caesar Cipher.</p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="01">
        <h1>Caesar Cipher</h1>
<p>Create a project named <em>encryption</em> in your working folder in the current topic.</p>
<p>With the project open, create a class named CaesarCipher. Open the class in the editor and remove default code except the class wrapper, all as shown in Figure 1.</p>
<p><img src="img/01.png" alt="Figure 1: CaesarCipher class in project encryption"></p>
<p>Add the following instance variables to CaesarCipher:</p>
<pre><code>  // The number of characters to shift
  int shift;
  // Defines the upper case range of ASCII characters
  private int minAsciiUpper = 65;
  private int maxAsciiUpper = 90;</code></pre>
<p>The variable <em>shift</em> is the number of characters that each message character is shifted so as to obtain the cipher text.</p>
<ul>
<li>For example if A is the message character and <ul>
<li>the shift is 1 then the cipher text character is 65 + 1 == 66 which is B,</li>
<li>the shift is 2 then the cipher text character is 65 + 2 == 67 which is C,</li>
<li>the shift is 25 then the cipher text character is 65 + 25 == 90 which is Z.</li>
</ul>
</li>
</ul>
<p>It is clear, therefore, that the valid range of the variable <em>shift</em> is [1, 25].</p>
<p>Validation to reject numbers outside this range is left as an exercise.</p>
<p>We will work only with upper case characters:</p>
<ul>
<li>Consult this <a href="http://www.asciitable.com/">ASCII table</a> and verify that the variables <em>minAsciiUpper</em> and <em>maxAsciiUpper</em> are correct.</li>
</ul>
<p>Here is the constructor:</p>
<pre><code>  /**
   * Constructs a CaesarCipher object
   * 
   * @param shift The amount by which to shift each message character so
   * as to obtain a cipher text character. Valid range: [1, 25]. 
   *          
   */
  public CaesarCipher(int shift)
  {
      this.shift = shift;
  }</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="02">
        <h1>Caesar Cipher (Encryption)</h1>
<p>Next we introduce a method to encrypt a single character.</p>
<pre><code>  /**
   * Encrypt a single character using the Caesar Cipher
   * @param ch The character to be encrypted
   * @return Returns the encrypted character
   */
  public char encrypt(char ch)
  {
    int encryptedChar = ch + shift;
    if (encryptedChar &gt; maxAsciiUpper)
    {
      encryptedChar = minAsciiUpper + encryptedChar % maxAsciiUpper - 1;
    }
    return (char) encryptedChar;
  }</code></pre>
<p>A few points are worth noting regarding the above method, <em>encrypt</em>:</p>
<ul>
<li><p>The type of the variable <em>shift</em> is int which is 32 bit. A <em>char</em> is 16 bit. Therein lies the reason that the local variable <em>encryptChar</em> is declared as an int type. Those interested in acquiring a deeper understanding of the rules applicable in this and similar situations are referred to <a href="https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.4">5.1.3. Narrowing Primitive Conversion</a> in the <a href="https://docs.oracle.com/javase/specs/jls/se7/html/index.html">Java Language Specification</a>.</p>
</li>
<li><p>The method ensures that the encrypted char is always in the range [A - Z] with this expression:</p>
</li>
</ul>
<pre><code>minAsciiUpper + encryptedChar % maxAsciiUpper - 1</code></pre>
<p>The following method encrypts the entire message text (plain text) string by converting the message to an array of chars and invoking <em>encrypt(char ch)</em> on each individual character in the message:</p>
<pre><code>  /**
   * Encrypt a plain text message using the Caesar Cipher
   * @param messageText The message text (plain text)
   * @return Returns the cipher text as a string
   */
  public String encrypt(String messageText)
  {
    char[] chars = messageText.toCharArray();
    char[] encryptedChars = new char[chars.length];
    for (int i = 0; i &lt; chars.length; i += 1)
    {
      encryptedChars[i] = encrypt(chars[i]);
    }
    return new String(encryptedChars);
  }</code></pre>

      </div>
     
      <div  class="ui tab segment lab" data-tab="03">
        <h1>Caesar Cipher (Decryption)</h1>
<p>Next we address decryption. Here is the code to decrypt a single character:</p>
<pre><code>  /**
   * Decrypt a single character using the Caesar Cipher
   * @param ch The character to be decrypted
   * @return Returns the decrypted character.
   */
  private char decrypt(char ch)
  {
    int range = maxAsciiUpper - minAsciiUpper; 
    int decryptedChar = ch + range - shift + 1;
    if (decryptedChar &gt; maxAsciiUpper)
    {
      decryptedChar = minAsciiUpper + decryptedChar % maxAsciiUpper - 1;
    }
    return (char) decryptedChar;
  }</code></pre>
<p>And the code to decrypt a ciphertext string:</p>
<pre><code>  /**
   * Decrypt a cipher text using the Caesar Cipher
   * @param cipherText The cipher text (encrypted message text)
   * @return Returns the message text (plain text) as a string
   */

  public String decrypt(String cipherText)
  {
    char[] chars = cipherText.toCharArray();
    char[] decryptedChars = new char[chars.length];
    for (int i = 0; i &lt; decryptedChars.length; i += 1)
    {
      decryptedChars[i] = decrypt(chars[i]);
    }
    return new String(decryptedChars);
  }</code></pre>
<p>Finally, write a method <em>unitTest</em> to verify the program works as expected:</p>
<ul>
<li>Declare and define a shift value (here 13, for example).</li>
<li>Encrypt a message.</li>
<li>Decrypt the cipher text and verify it matches the message.</li>
<li>Test using various shift values, in particular the edge conditions using the maximum and minimum legal values of the <em>shift</em> variable. Consider adding a loop to iterate a range of shift values. (Figure 1).</li>
<li>Sample test output is shown in Figure 2.</li>
</ul>
<pre><code>public void test()
{
    int shift = 13;
    CaesarCipher cc = new CaesarCipher(shift);
    String plainText = &quot;THISISAPLAINTEXTSTRINGITSURELYIS&quot;;
    System.out.println(&quot;Plaintext:  &quot; + plainText);
    String cipherText = cc.encrypt(plainText);
    System.out.println(&quot;Ciphertext: &quot; + cipherText);
    System.out.println(&quot;Plaintext:  &quot; + cc.decrypt(cipherText));
}</code></pre>
<p><img src="img/03.png" alt="Figure 1: Invoking CaesarCipher.test()">
<img src="img/02.png" alt="Figure 2: Output from unit test"></p>

      </div>
     
      <div  class="ui tab segment lab" data-tab="Exercises">
        <h1>Exercises</h1>
<p><strong>Exercise 1</strong></p>
<p>Validate the constructor parameter <em>shift</em>, ensuring only numbers within a valid range are accepted.</p>
<pre><code>private boolean isValid(int shift)</code></pre>
<p><strong>Exercise 2</strong></p>
<p>Validate both the message and cipher text strings so as to ensure all characters are upper case letters.</p>
<pre><code>private boolean isUpperCase(String string)</code></pre>
<p>Introduce the method into your code and test by inputting, first valid data, then invalid data.</p>
<p><strong>Exercise 3</strong></p>
<p><strong>3.1</strong> Write a method to generate a ciphertext using a randomly generated shift. Here is partially completed code:</p>
<pre><code>import java.util.Random;

  public static String encryptUsingRandomShift(String message)
  {
    // generates random integer in range [1, 25]
    int randomShift = new Random().nextInt(25) + 1;

    // Create a CaesarCipher object using randomShift as constructor parameter
    // Hence encrypt parameter *message*.
    // Return ciphertext. 
  }</code></pre>
<p><strong>3.2</strong></p>
<p>Compose a message, select a member of your class and exchange ciphertexts generated using <em>encryptUsingRandomShift</em>.</p>
<p>Write a method to both decrypt your partner&#39;s ciphertext and recover the <em>shift</em> integer used to encrypt.</p>
<ul>
<li>The method should be a <em>brute-force attack</em>. That is, it iterates the complete valid range of the <em>shift</em> instance variable, printing the decrypted string and associated shift at each iteration. The solution may be determined by observation.</li>
</ul>
<p><strong>Exercise 4: Substitution Cipher</strong></p>
<p>The Caesar Cipher is categorized as a substitution cipher. Here we shall develop a substitution cipher in which the set of valid characters comprise the printable ASCII set.</p>
<p>The <a href="http://www.asciitable.com/">ASCII table</a> reveals this set to be in the range [32, 126], 32 being the space and 126 the tilde (~).</p>
<p>Still in the <em>encryption</em> project, develop a class named SubstitutionCipher, mining as much code as you can from the Caesar Cipher.</p>
<p>Here is starter code. </p>
<pre><code>public class SubstitutionCipher
{

  // The number of characters to shift to encrypt
  int shift;
  // Defines the printable range of ASCII characters
  private int minAscii = 32;
  private int maxAscii = 126;

  public SubstitutionCipher(int shift)
  {
    this.shift = shift;
  }
}</code></pre>
<p><strong>Exercise 5</strong></p>
<p>In the SubstitutionCipher write a method to validate the input string (message or cipher). A valid string shall contain only printable characters. Alert the user by printing a warning message if an invalid string is presented.</p>
<pre><code>  private boolean isASCIIPrintable(String string)</code></pre>
<p>Introduce the method at appropriate locations in SubstitutionCipher.</p>
<p><strong>Exercise 6</strong>
Develop a class VigenereCipher. </p>
<ul>
<li>Complete the skeleton code below so as to obtain the output shown in Figures 1 &amp; 2 when the method testVigenere is invoked.</li>
<li>You are free to refactor the code should you prefer to redesign the class.</li>
</ul>
<pre><code>
/*
 * For simplicity work in upper case and use [A-Z] only
 * That is, no other characters, such as white space and so on.
 * All input strings are immediately normalized to bytes in range [0 25] for algorithmic simplicity
 * For example the character A whose code is 65 becomes 0, B becomes 1 and so on.
 * The normalization process is reversed when required such as on generating output.
 * @author ...
 * @see http://www.cs.mtu.edu/~shene/NSF-4/Tutorial/VIG/Vig-Base.html
 * @see http://ascii.cl/
 * @version 15-2-2016
 */
public class VigenereCipher
{

    private static final byte NUMBER_CHARS = 26;
    private static byte[][] vignereTable = new byte[NUMBER_CHARS][NUMBER_CHARS];

    // vignereTable is normalized to range [0 25]. A is 65
    private static final byte TRANSFORM_UPPER = 65; 

    // keyword is building block for key
    // key comprises repeating keyword such that 
    // the key length matches length of plaintext
    private String keyword;

    // the key comprising repeating keyword
    // key is normalized to range [0 25]
    private byte[] key;

    // the plain or message text
    private byte[] plainText;

    // the encrypted message text
    private byte[] cipherText;

    public VigenereCipher()
    {
        generateVigenereTable();
    }

    public static void generateVigenereTable()
    {

    }

    /**
     * The keyword is used to generate a key. A key comprises repeating keywords.
     * The length of the key is the length of the plaintext. Example following:
     * Note absence of whitespace which is not allowed in this version. 
     * The keyword is ATTACKATDAWN
     * 
     * Plaintext: Thisisplaintextanditsasplainasplaincanbe 
     * Key:       ATTACKATDAWNATTACKATDAWNATTACKATDAWNATTA
     */
    public void setKeyword(String keyword)
    {

    }

    /**
     * Uses vignere table and keyword to encrypt plaintext
     * 
     * @param plainText
     * @return The cipher text
     */
    public String encrypt(String plainText)
    {

        byte[] cipherText = new byte[plainText.length()];
        // ...
        return new String(cipherText);
    }

    public String decrypt(String cipherText)
    {

        byte[] plainText = new byte[cipherText.length()];
        // ...
        return new String(plainText);
    }

    /**
     * Find the column index in the vigenere table on which the cipherText char located
     * @param row The row number on which the current key character is located
     * @param cipherTxt The current cipherText character
     * @return The column number containing the decrypted message, i.e. the plain text character
     */
    private byte getCipherTextColumn(byte row, byte cipherTxt)
    {
        byte col = 0;
        // ...
        return col;
    }

    /**
     * Convert the plain text string to a normalized array of bytes
     * @param plainText The plain text string
     */
    private void setPlainText(String plainText)
    {
        // ...
    }

    /**
     * Convert the cipherText to a normalized array of bytes
     * The cipher text is an instance variable byte[] cipherText
     * @param cipherText The cipher text string
     */
    private void setCipherText(String cipherText)
    {

    }

    /**
     * Use the instance variable keyword to generate a key
     * The key is an instance variable byte[] key
     * whose length is the same as the length of the plain text.
     * @param plainText The plain text for which a key will be generated.
     */
    public void generateKey(String plainText)
    {
        // ...
        printMessageAndKey();
    }

    /**
     * A test method to output both the message and key
     */
    public void printMessageAndKey()
    {

    }

    /**
     * A test method to output the vigenere table
     */
    public static void printVigenereTable()
    {

    }

    /*
     * The main test method used to print the Vigenere table and 
     * encrypt and decrypt the resulting cipher text arising from a sample message text
     */
    public static void testVigenere()
    {
        VigenereCipher vigenere = new VigenereCipher();

        printVigenereTable();
        System.out.println();

        vigenere.setKeyword(&quot;HOUGHTON&quot;);
        String messageText = &quot;MICHIGANTECHNOLOGICALUNIVERSITY&quot;;
        String cipherText = vigenere.encrypt(messageText);
        System.out.println(cipherText);
        String plainText = vigenere.decrypt(cipherText);
        System.out.println(plainText);
    }
}</code></pre>
<p><img src="img/05.png" alt="Figure 1: Vigenere table">
<img src="img/04.png" alt="Figure 2: Test output"></p>

      </div>
     
    </div>
  </div>
</div>
  <div class="ui bottom fixed borderless right menu">
    <div class="ui right tiny menu">
      <div class="ui mini message segment">
        John Fitzgerald.
        <a  href="http://creativecommons.org/licenses/by-nc/4.0/" title="External link to http://creativecommons.org/licenses/by-nc/4.0/"
            target="_blank">Creative Commons License
        </a>
      </div>
    </div>
  </div>

<script>
  $(document).on('keydown', function (e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

</script>

    <footer>

    </footer>
    <script>
      $(document).ready(function () {
  $('img').addClass('ui image');
  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function (i) {
    if (($images[i].alt).length > 0) {
      const divImg = $(document.createElement('div')).addClass('ui basic segment');
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass('ui blue ribbon label');
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.embed').embed();

  $('.ui.menu .item')
      .tab({
        history: true,
        historyType: 'hash',
      });

  $('.popup').popup();

  $('.ui.sidebar')
      .sidebar({ context: $('.pushable') })
      .sidebar('setting', 'transition', 'slide out')
      .sidebar('attach events', '#toc');
});

    </script>
  </body>

 </html>